"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[966],{4966:function(e,n,a){a.r(n),a.d(n,{default:function(){return T}});var t,r=a(4165),i=a(5861),s=a(9439),c=a(2791),l=a(9073),o=a(7689),d={delEntry:function(e){return fetch(u+e,{method:"DELETE"}).then(f)},get:function(e){return fetch(u+e,{method:"GET"}).then(f)},post:function(e,n){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};return fetch(u+e,a).then(f)},upload:function(e,n){return fetch(u+e,{method:"POST",headers:{accept:"application/json"},body:n}).then(f)}},u=null!==(t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BACKEND_URL)&&void 0!==t?t:"http://localhost:8088";function f(e){return e.text().then((function(n){var a=n;try{a=JSON.parse(n)}catch(t){a=n}if(!e.ok){[401,403].includes(e.status);var t=a||e.statusText;return Promise.reject({status:e.status,error:t})}return a}))}var p=a.p+"static/media/upload.c3aa63a4736405ce1c846625333e5a2c.svg",h=a(184),m=function(e){var n=e.width,a=e.height;return(0,h.jsxs)("svg",{width:n,height:a,viewBox:"0 0 24 24",fill:"white",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsxs)("circle",{cx:"4",cy:"12",r:"0",children:[(0,h.jsx)("animate",{begin:"0;h.end",attributeName:"r",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"0;3",fill:"freeze"}),(0,h.jsx)("animate",{begin:"b.end",attributeName:"cx",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"4;12",fill:"freeze"}),(0,h.jsx)("animate",{begin:"d.end",attributeName:"cx",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"12;20",fill:"freeze"}),(0,h.jsx)("animate",{id:"g",begin:"f.end",attributeName:"r",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"3;0",fill:"freeze"}),(0,h.jsx)("animate",{id:"h",begin:"g.end",attributeName:"cx",dur:"0.001s",values:"20;4",fill:"freeze"})]}),(0,h.jsxs)("circle",{cx:"4",cy:"12",r:"3",children:[(0,h.jsx)("animate",{begin:"0;h.end",attributeName:"cx",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"4;12",fill:"freeze"}),(0,h.jsx)("animate",{begin:"b.end",attributeName:"cx",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"12;20",fill:"freeze"}),(0,h.jsx)("animate",{id:"e",begin:"d.end",attributeName:"r",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"3;0",fill:"freeze"}),(0,h.jsx)("animate",{id:"f",begin:"e.end",attributeName:"cx",dur:"0.001s",values:"20;4",fill:"freeze"}),(0,h.jsx)("animate",{begin:"f.end",attributeName:"r",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"0;3",fill:"freeze"})]}),(0,h.jsxs)("circle",{cx:"12",cy:"12",r:"3",children:[(0,h.jsx)("animate",{begin:"0;h.end",attributeName:"cx",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"12;20",fill:"freeze"}),(0,h.jsx)("animate",{id:"c",begin:"b.end",attributeName:"r",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"3;0",fill:"freeze"}),(0,h.jsx)("animate",{id:"d",begin:"c.end",attributeName:"cx",dur:"0.001s",values:"20;4",fill:"freeze"}),(0,h.jsx)("animate",{begin:"d.end",attributeName:"r",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"0;3",fill:"freeze"}),(0,h.jsx)("animate",{begin:"f.end",attributeName:"cx",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"4;12",fill:"freeze"})]}),(0,h.jsxs)("circle",{cx:"20",cy:"12",r:"3",children:[(0,h.jsx)("animate",{id:"a",begin:"0;h.end",attributeName:"r",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"3;0",fill:"freeze"}),(0,h.jsx)("animate",{id:"b",begin:"a.end",attributeName:"cx",dur:"0.001s",values:"20;4",fill:"freeze"}),(0,h.jsx)("animate",{begin:"b.end",attributeName:"r",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"0;3",fill:"freeze"}),(0,h.jsx)("animate",{id:"e",begin:"d.end",attributeName:"cx",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"4;12",fill:"freeze"}),(0,h.jsx)("animate",{begin:"f.end",attributeName:"cx",calcMode:"spline",dur:"0.5s",keySplines:".36,.6,.31,1",values:"12;20",fill:"freeze"})]})]})},x=function(e){var n=e.refresh,a=(0,o.TH)(),t=(0,c.useRef)(null),u=(0,c.useState)(""),f=(0,s.Z)(u,2),x=f[0],v=f[1],b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files.length){e.next=2;break}return e.abrupt("return");case 2:return i=t.target.files[0],v(i.name),(s=new FormData).append("file",i),s.append("path",a.pathname),e.next=9,d.upload("/api/file/upload",s).then((function(e){e.Result?(n&&n(a.pathname),l.ZP.success("File uploaded successfully!")):l.ZP.error("Error Message from Server : ".concat(e.ErrorMessage))})).catch((function(e){l.ZP.error("Error occured while uploading file"),console.log(e)}));case 9:v("");case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"upload-component",children:[(0,h.jsx)("span",{className:"filename",children:x.length>0?x:"Please select file"}),(0,h.jsx)("button",{className:"btn-upload",disabled:x.length>0,onClick:function(e){t.current&&t.current.click()},children:x.length>0?(0,h.jsx)(m,{width:32,height:16}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{children:"Select File"}),(0,h.jsx)("img",{src:p,alt:"Upload File"})]})}),(0,h.jsx)("input",{type:"file",hidden:!0,ref:t,onChange:b})]})};var v=a.p+"static/media/folder.04565ac67346782126ee5e695169dac3.svg";var b=a.p+"static/media/file.6dd22a25d41bfd6ea439991436ecb04e.svg";var g,j=a.p+"static/media/trash.312a94551d19ccbdcfa40efa902c8c7b.svg",N=null!==(g={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BACKEND_URL)&&void 0!==g?g:"http://localhost:8088",S=function(e){var n,a=e.data,t=e.refresh,r=e.showConfirm,i=(0,o.s0)(),s=(0,o.TH)();return(0,h.jsxs)("div",{className:"list-entry-wrapper",children:[(0,h.jsxs)("div",{className:"list-entry",children:["File"===a.Type?(0,h.jsx)("img",{src:b,alt:"folder"}):(0,h.jsx)("img",{src:v,alt:"file"}),"File"===a.Type?(0,h.jsx)("a",{className:"entry-name",href:"".concat(N,"/api/file/download?path=").concat("/"===s.pathname?"":s.pathname,"/").concat(a.Name),download:!0,children:"".concat(a.Name,"   ").concat((n=a.Size,n<1024?"".concat(n,"byte"):n<1048576?"".concat(Math.ceil(n/1024),"KB"):n<1073741824?"".concat(Math.ceil(n/1024/1024),"MB"):n<1099511627776?"".concat(Math.ceil(n/1024/1024/1024),"GB"):"".concat(Math.ceil(n/1024/1024/1024/1024),"TB")))}):(0,h.jsx)("span",{className:"entry-name",onClick:function(e){var n="".concat("/"===s.pathname?"":s.pathname,"/").concat(a.Name);i(n),t&&t(n)},children:a.Name})]}),(0,h.jsx)("button",{className:"delete-btn",onClick:function(e){r&&r(a.Name)},children:(0,h.jsx)("img",{src:j,alt:"Delete"})})]})},y=a(1438),k=a(7948),w=a.n(k),E=function(e){var n=e.caption,a=e.closeModal;return(0,h.jsxs)(w(),{ariaHideApp:!1,isOpen:n.length>0,overlayClassName:"modal-overlay",className:"modal-content confirm-modal",children:[(0,h.jsx)("h2",{className:"header",children:"Delete entry"}),(0,h.jsxs)("div",{className:"content",children:[(0,h.jsx)("div",{className:"caption-wrapper",children:"Do you want delete ".concat(n,"?")}),(0,h.jsxs)("div",{className:"btn-group",children:[(0,h.jsx)("button",{className:"btn-red",onClick:function(e){a&&a(!0)},children:"Delete"}),(0,h.jsx)("button",{className:"close-btn",onClick:function(e){a&&a(!1)},children:"No"})]})]})]})},M=function(e){var n=e.isLoading,a=e.list,t=e.refresh,u=(0,o.TH)(),f=(0,o.s0)(),p=(0,c.useState)(""),m=(0,s.Z)(p,2),x=m[0],v=m[1],b=function(e){v(e)},g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,d.delEntry("/api/file/delete?path=".concat("/"===u.pathname?"":u.pathname,"/").concat(x)).then((function(e){if(!1!==e.Result)return l.ZP.success("".concat(x," is deleted")),!0;l.ZP.error("Error message from Server : ".concat(e.ErrorMessage))})).catch((function(e){l.ZP.error("Error occured while browsing sever"),console.log(e)}));case 3:!0===e.sent&&t&&t(u.pathname);case 5:v("");case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsx)("div",{className:"list-presenter",children:n?(0,h.jsx)(y.Z,{}):(0,h.jsxs)(h.Fragment,{children:["/"!==u.pathname&&(0,h.jsx)("div",{className:"go-upper",onClick:function(e){var n=u.pathname.split("/").slice(0,-1).join("/");f(n),t&&t(n)},children:"... go back"}),a.map((function(e,n){return(0,h.jsx)(S,{data:e,refresh:t,showConfirm:b},n)})),(0,h.jsx)(E,{caption:x,closeModal:g})]})})},T=function(){var e=(0,c.useState)(!1),n=(0,s.Z)(e,2),a=n[0],t=n[1],u=(0,c.useState)([]),f=(0,s.Z)(u,2),p=f[0],m=f[1],v=(0,c.useRef)(!0),b=(0,o.TH)(),g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.current){e.next=2;break}return e.abrupt("return");case 2:t(!0),d.get("/api/file/list?".concat("/"!==n?"path="+n:"")).then((function(e){!1!==e.Result?(v.current&&m(e.FileList),v.current&&t(!1)):l.ZP.error("Error message from Server : ".concat(e.ErrorMessage))})).catch((function(e){l.ZP.error("Error occured while browsing sever"),console.log(e),v.current&&m([]),v.current&&t(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(e){m([]),g(e)};return(0,c.useEffect)((function(){return g(b.pathname),function(){v.current=!1}}),[]),(0,h.jsx)("div",{className:"main-wrapper",children:(0,h.jsxs)("div",{className:"container",children:[(0,h.jsx)("h2",{children:"Curling Site"}),(0,h.jsx)("div",{className:"list-wrapper",children:(0,h.jsx)(M,{isLoading:a,list:p,refresh:j})}),(0,h.jsx)("div",{className:"divider"}),(0,h.jsx)("div",{className:"upload-wrapper",children:(0,h.jsx)(x,{refresh:j})})]})})}}}]);
//# sourceMappingURL=966.ed4ab1ea.chunk.js.map